!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){var c;for(c in e){if(a.hasOwnProperty(c))throw"Entity property conflict!: "+c;a[c]=e[c]}b.forEach(function(b){for(c in b)a[c]=b[c]})}var e={startTime:0,elapsedTime:null,timeLimit:null,activeTimer:!1,penaltyTile:!1,topBlock:!1,rightBlock:!1,bottomBlock:!1,leftBlock:!1,blockCollision:!1,playerLastX:null,playerLastY:null},f={start_timer:function(){this.startTime=new Date,this.activeTimer=!0},stop_timer:function(){this.startTime=0,this.activeTimer=!1},update_timer:function(a){this.activeTimer===!0&&(this.elapsedTime=parseInt((new Date-this.startTime)/1e3,10),this.elapsedTime>a&&this.stop_timer())}},g={check_collision:function(a){this.x===a.x&&this.y===a.y?this.penaltyTile=!0:this.penaltyTile=!1},update:function(a){this.check_collision(a),this.penaltyTile===!0&&a.y===this.y&&a.x===this.x&&(a.collided=!0)}},h={check_collision:function(a){this.x===a.x&&this.y===a.y&&(this.blockCollision=!0,this.playerLastY<this.y&&(this.topBlock=!0),this.playerLastX>this.x&&(this.rightBlock=!0),this.playerLastY>this.y&&(this.bottomBlock=!0),this.playerLastX<this.x&&(this.leftBlock=!0))},update:function(a){this.check_collision(a),this.blockCollision===!0&&(this.topBlock===!0&&(a.y=this.y-83,a.x=this.x,this.topBlock=!1),this.rightBlock===!0&&(a.x=this.x+101,a.y=this.y,this.rightBlock=!1),this.bottomBlock===!0&&(a.y=this.y+83,a.x=this.x,this.bottomBlock=!1),this.leftBlock===!0&&(a.x=this.x-101,a.y=this.y,this.leftBlock=!1),this.blockCollision=!1),this.playerLastX=a.x,this.playerLastY=a.y}};b.exports={setTimer:f,takeLife:g,impassable:h,add_behaviors:d}},{}],2:[function(a,b,c){"use strict";function d(){T-=1;var a=$(".lives");a.length&&a[0].remove()}function e(){T+=1,T<10?va.append('<li class="lives"><img src="assets/images/heart-small.png"></li>'):va.html('<li class="lives"><img src="assets/images/heart-small.png"></li> '+T)}function f(){ma.forEach(function(a){a.forEach(function(a){var b=g(a.srcObj);a.srcObj.src=a.path+b,a.srcObj.volume=pa,a.srcObj.load(),"sfx"===a.category?ga[a.name]=a.srcObj:"bgm"===a.category?ka[a.name]=a.srcObj:(ua.text("Error loading audio. See browser console for details.").attr("class",""),console.error('Error: @load_audio -- Audio catgeory can only be "sfx" or "bgm"'))})})}function g(a){var b;return""!==a.canPlayType("audio/mpeg")&&(b=".mp3"),""!==a.canPlayType("audio/ogg")&&(b=".ogg"),b}function h(){var a=ka[la];oa===!0?a.play():a.pause()}function i(a){return!a.ended&&a.currentTime>0}function j(a){var b,c;if(b=ga[a],na)if(i(b)){for(I=0;I<fa.length;I++)if(c=fa[I],!i(c)){c.src=b.currentSrc,c.load(),c.volume=b.volume,c.play(),fa=[new Audio,new Audio,new Audio];break}}else b.play()}function k(a,b,c){var d,e=null;switch(a){case"ground":e=new Ga,d=[];break;case"grass":e=new Ha,d=[];break;case"water":e=new Ia,d=[L.takeLife];break;case"rock":e=new Ja,d=[L.impassable]}return e.x=b,e.y=c,L.add_behaviors(e,d),e}function l(a,b){var c=0,d=K.shuffle([0,101,202,303,404]),e=K.shuffle([143,226,309]),f=[b];for(I=0;I<d.length;I++){var g=a[I];if(void 0!==g){g.x=d[I];for(var h=0;h<e.length;h++){g.y=e[h];for(var i=0;i<f.length;i++){var j=f[i];(g.x===b.x&&g.y===b.y||g.x===j.x+101||g.x===j.x-101||g.x===j.y+83)&&(g.x=d[I+1],g.y=e[h+1])}if(f.push(g),c++,c>a.length)break}}}}function m(){for(I=0;I<Da;I++)Ca=k("rock",null,null),Ba.push(Ca);l(Ba,yb)}function n(){for(I=0;I<za;I++)ya=k("water",null,null),xa.push(ya);Aa===!0&&l(xa,yb),xa.forEach(function(a){void 0!==a&&wa.push(a)})}function o(a,b){var c=K.gen_rand_index(Na.length,0),d=Na[c],e=[L.setTimer],f=new Pa;switch(f.name=d,f.x=a,f.y=b,d){case"gem-blue":f.sprite="assets/images/gem-blue.png",f.points=5;break;case"gem-green":f.sprite="assets/images/gem-green.png",f.points=10;break;case"gem-orange":f.sprite="assets/images/gem-orange.png",f.points=15;break;case"heart":f.sprite="assets/images/heart.png",f.bonusLife=!0}return L.add_behaviors(f,e),f}function p(a,b){var c=null;switch(a){case"red1":c=new ob,c.y=N[1],c.speed=fb[0],c.fromLeft=gb[0];break;case"red2":c=new pb,c.y=N[2],c.speed=fb[1],c.fromLeft=gb[1];break;case"red3":c=new qb,c.y=N[3],c.speed=fb[2],c.fromLeft=gb[2];break;case"red4":c=new rb,c.y=N[4],c.speed=fb[3],c.fromLeft=gb[3];break;case"yellow":c=new sb,c.y=N[K.gen_rand_index(4,1)],c.speed=jb[K.gen_rand_index(jb.length,0)],c.fromLeft=kb[K.gen_rand_index(kb.length,0)];break;case"green":c=new tb,c.y=N[K.gen_rand_index(2,2)],c.speed=150,c.fromLeft=kb[K.gen_rand_index(kb.length,0)],c.rowShift=kb[K.gen_rand_index(kb.length,0)];break;case"blue":c=new ub,c.y=hb,c.speed=25,c.fromLeft=kb[K.gen_rand_index(kb.length,0)];break;case"purple":c=new vb,c.y=N[1],c.speed=100,c.fromLeft=kb[K.gen_rand_index(kb.length,0)]}c.name.match(/^red[1-4]/)?c.fromLeft===!0?c.x=O[K.gen_rand_index(4,1)]+(c.w+153)*b:(c.sprite="assets/images/bug-red-left.png",c.x=O[K.gen_rand_index(4,1)]-(c.w+153)*b,c.x!==c.x&&(c.x=505-(c.w+153)*b)):c.fromLeft===!0?c.x=lb:(null===c.name.match(/^red[1-4]/)&&(c.sprite="assets/images/bug-"+c.name+"-left.png"),c.x=mb),ib.push(c)}function q(){var a=null;return a=new Ab,zb=!0,a}function r(a,b,c,d){3===Db&&(Db=0);var e=25*Db;Db++,Qa=a.num,Ra=b.num,Sa=c.num,Ta=d.num,Ua=a.speed+e+K.gen_rand_index(50,10),Va=b.speed+e+K.gen_rand_index(50,10),Wa=c.speed+e+K.gen_rand_index(50,10),Xa=d.speed+e+K.gen_rand_index(50,10),Ya=a.dir,Za=b.dir,$a=c.dir,_a=d.dir,eb=[Qa,Ra,Sa,Ta],fb=[Ua,Va,Wa,Xa],gb=[Ya,Za,$a,_a]}function s(){if(eb)for(I=0;I<eb[0];I++)p("red1",I);if(eb)for(I=0;I<eb[1];I++)p("red2",I);if(eb)for(I=0;I<eb[2];I++)p("red3",I);if(eb)for(I=0;I<eb[3];I++)p("red4",I);for(I=0;I<ab;I++)p("yellow");for(I=0;I<bb;I++)p("green");for(I=0;I<cb;I++)p("blue");for(I=0;I<db;I++)p("purple");yb=q(),yb.sprite=wb[K.gen_rand_index(wb.length,0)],Ea&&m(),Aa&&n()}function t(a){var b,c,d,e;a<=3?(Bb=Cb.map01,b={num:2,speed:50,dir:!1},c={num:1,speed:50,dir:!0},d={num:2,speed:50,dir:!1},e={num:1,speed:50,dir:!0},r(b,c,d,e)):a>3&&a<=6?(Bb=Cb.map01,b={num:1,speed:50,dir:!0},c={num:1,speed:50,dir:!0},d={num:1,speed:50,dir:!1},e={num:2,speed:50,dir:!1},r(b,c,d,e),bb=1,6===a&&(db=1)):a>6&&a<=9?(Bb=Cb.map02,b={num:1,speed:50,dir:!1},c={num:1,speed:50,dir:!1},d={num:1,speed:120,dir:!0},e={num:2,speed:50,dir:!0},r(b,c,d,e),ab=1,9===a&&(cb=1,hb=N[1])):a>9&&a<=12?(Bb=Cb.map03,b={num:1,speed:50,dir:!1},c={num:0,speed:50,dir:!0},d={num:1,speed:50,dir:!1},e={num:3,speed:20,dir:!0},r(b,c,d,e),ab=1,db=1):13===a?(Bb=Cb.map04,ab=1,bb=2,cb=1,hb=N[1]):a>13&&a<=16?(Bb=Cb.map01,16===a?(za=3,Aa=!0):(Da=3,Ea=!0),b={num:2,speed:100,dir:!1},c={num:0,speed:50,dir:!0},d={num:0,speed:50,dir:!1},e={num:2,speed:50,dir:!0},r(b,c,d,e),bb=2):a>16&&a<=19?(Bb=Cb.map02,b={num:0,speed:50,dir:!1},c={num:1,speed:100,dir:!0},d={num:2,speed:50,dir:!1},e={num:1,speed:50,dir:!0},r(b,c,d,e),db=1,cb=1,hb=N[1]):20===a?(Bb=Cb.map05,ab=3,bb=1,db=1,cb=1,hb=N[3]):(Nb=!0,Ob=!0),u(Bb),s()}function u(a){for(var b,c,d=null,e=a.length,f=0;f<e;f++){b=a[f],c=b.length;for(var g=0;g<c;g++)1!==b[g]&&2!==b[g]&&(3===b[g]&&(d=k("water",O[g],N[f])),4===b[g]&&(d=k("rock",O[g],N[f])),d&&("rock"===d.name?Ba.push(d):wa.push(d)))}}function v(){Kb=!0;var a="assets/images/cartridge.png";Fb.drawImage(M.get(a),0,0),Hb.click(function(){Kb=!1,ta.css("backgroundImage","none"),sa.fadeIn(100),Hb.off(),w(Eb.width/2,Eb.height/2)})}function w(a,b){Lb=!0;var c=0,d=0,e=null,f=N[3],g=new ob;g.x=a,g.y=b;var h=function(){Fb.fillStyle="rgba(0, 150, 255, 1.0)",Fb.fillRect(0,0,Eb.width,Eb.height),Fb.font='16pt "Press Start 2P"',Fb.textAlign="center",Fb.fillStyle="rgba(255, 255, 255, 1.0)",Fb.fillText("Bug Frenzy",Eb.width/2,Eb.height/2-100),Fb.fillText('Press "S" to start',Eb.width/2,Eb.height/2-50),g.x=c,g.y=d,g.render(),c===Eb.width&&(c=-101,f=N[K.gen_rand_index(5,1)]),c++,d=f+10*Math.sin(c/10%360),Lb===!0?e=window.requestAnimationFrame(function(){h()}):(window.cancelAnimationFrame(e),e=null,x())};Lb===!0&&h()}function x(){Mb=!0;var a=null;Jb=!1,Fb.fillStyle="rgba(0, 150, 255, 1.0)",Fb.clearRect(0,0,Eb.width,Eb.height),Fb.fillRect(0,0,Eb.width,Eb.height),Fb.font='16pt "Press Start 2P"',Fb.textAlign="center",Fb.fillStyle="rgba(255, 255, 255, 1.0)",Fb.fillText("Level "+V,Eb.width/2,Eb.height/2-100),Fb.fillText("Get Ready!",Eb.width/2,Eb.height/2-50),a=window.setTimeout(function(){Mb=!1,V>1?(window.clearTimeout(a),z(V)):(window.clearTimeout(a),t(1),Jb=!0,G())},3e3)}function y(){oa=!1,h(),Jb=!1,Hb.off(),Fb.font='14pt "Press Start 2P"',Fb.textAlign="center",Fb.fillStyle="rgba(0, 0, 0, 0.5)",Fb.fillRect(0,0,Eb.width,Eb.height),Fb.fillStyle="#ffffff",Ob===!0?(la="track_1",oa=!0,h(),Fb.fillText("Congratulations!",Eb.width/2,Eb.height/2-150),Fb.fillText("You survived the frenzy",Eb.width/2,Eb.height/2-100),Fb.fillText("Thanks for playing",Eb.width/2,Eb.height/2-50),Fb.fillText("Score "+Q,Eb.width/2,Eb.height/2),Fb.fillText('Press "S" to start again',Eb.width/2,Eb.height/2+100)):(Fb.fillText("GAME OVER!",Eb.width/2,Eb.height/2-100),Fb.fillText("Score "+Q,Eb.width/2,Eb.height/2),Fb.fillText('Press "S" to start again.',Eb.width/2,Eb.height/2+100))}function z(a){U.text("Level "+a),H(),t(a),Jb=!0,Y=(new Date).getTime(),Ib=Date.now(),A()}function A(){var a=Date.now(),b=(a-Ib)/1e3;B(b,a),F(),Ib=a,Jb&&window.requestAnimationFrame(A)}function B(a,b){var c=180-parseInt((b-Y)/1e3)-S;for(Nb===!1&&(oa=qa.checked,na=ra.checked,h()),yb.keyPressed===!0&&(zb=!1),I=0,J=ib.length;I<J;I++)ib[I].name.match(/^red[1-4]/)?ib[I].x>Eb.width?ib[I].x=lb:ib[I].x<-101&&(ib[I].x=mb):"purple"!==ib[I].x&&ib[I].x>Eb.width||ib[I].x<-101?(p(ib[I].name),ib.splice(I,1)):ib[I].y>N[5]&&(p(ib[I].name),ib.splice(I,1));if(yb.done===!0){xb.push(yb);var d=wb.indexOf(yb.sprite);if(wb.splice(d,1),La===!0&&Ka.check_player_get(yb),5===xb.length){var e=c*R;Q+=e,P.text("Score "+Q),V+=1,V!==W+1?Mb=!0:(Ob=!0,Nb=!0)}else Oa.forEach(function(a){if(yb.x===a){var b=Oa.indexOf(a);Oa.splice(b,1)}}),yb=q(),yb.sprite=wb[K.gen_rand_index(wb.length,0)]}if(0===T&&(Nb=!0),0===c&&(yb.collided=!0,Y=(new Date).getTime(),S+=50),yb.check_collision(ib,xb),parseInt(b/1e3)%20===0&&La===!1&&Oa.length){var f=K.gen_rand_index(Oa.length,0);Ka=o(Oa[f],N[0]),Ka.start_timer(),La=!0}c!==aa&&X.text("Time "+c),aa=c,C(a)}function C(a){if(wa.length)for(I=0,J=wa.length;I<J;I++)wa[I].update(yb);for(I=0,J=ib.length;I<J;I++)ib[I].update(a,yb);for(yb.update(a),I=0,J=Ba.length;I<J;I++)Ba[I].update(yb);for(I=0,J=xa.length;I<J;I++)xa[I].update(yb);null!==Ka&&Ka.activeTimer===!0&&La===!0?(Ka.update_timer(7),Ka.update()):La=!1}function D(a){for(var b,c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.length;e++){var f;if(1===d[e]&&(f=Pb.g),2===d[e]&&(f=Pb.b),3===d[e]&&(f=Pb.w),5===d[e]&&(f=Pb.b),wa.length)for(I=0,J=wa.length;I<J;I++)b=wa[I],b.x===O[e]&&b.y===N[c]&&(f=b.sprite);Fb.drawImage(M.get(f),101*e,83*c)}}function E(){for(I=0,J=xb.length;I<J;I++)xb[I].render();for(I=0,J=ib.length;I<J;I++)ib[I].render();for(null!==Ka&&Ka.activeTimer===!0&&La===!0&&Ka.render(),I=0,J=Ba.length;I<J;I++)Ba[I].render();Nb===!0||Ob===!0?y():Mb===!0?x():yb.render()}function F(){Fb.clearRect(0,0,Eb.width,Eb.height),D(Bb),E()}function G(){Q=0,P.text("Score "+Q),Y=(new Date).getTime(),Ib=Date.now(),A()}function H(){if(Qa=null,Ra=null,Sa=null,Ta=null,Ua=null,Va=null,Wa=null,Xa=null,Ya=null,Za=null,$a=null,_a=null,ab=null,bb=null,cb=null,hb=null,db=null,Da=null,za=null,Ea=!1,Aa=!1,wb=["assets/images/char-boy.png","assets/images/char-cat-girl.png","assets/images/char-horn-girl.png","assets/images/char-pink-girl.png","assets/images/char-princess-girl.png"],xb=[],Oa=[0,101,202,303,404],ib=[],Ba=[],xa=[],wa=[],Y=null,Z=null,_=null,aa=null,S=0,U.text("Level "+V),Kb===!1)if(Lb===!0)for(Lb=!1,V=1,I=0;I<3;I++)e();else{if(Nb===!1&&V>1)return;if(Nb===!0){if(Nb=!1,Ob===!0){Ob=!1;var a=$(".lives");if(a)for(I=0;I<a.length;I++)a[I].remove()}for(I=0;I<3;I++)e();T=3,V=1,U.text("Level 1"),x()}else v(),f()}}var I,J,K=a("./randtools"),L=a("./behaviors"),M=a("./resources"),N=[-43,60,143,226,309,392],O=[0,101,202,303,404],P=$("#game-score"),Q=null,R=1,S=0,T=null,U=$("#level-indicator"),V=1,W=20,X=$("#game-time"),Y=null,Z=null,_=null,aa=null,ba=document.getElementById("blip"),ca=document.getElementById("blip"),da=document.getElementById("ouch"),ea=[{category:"sfx",name:"start",srcObj:ba,path:"assets/audio/sfx_blip"},{category:"sfx",name:"gem",srcObj:ca,path:"assets/audio/sfx_blip"},{category:"sfx",name:"collision",srcObj:da,path:"assets/audio/sfx_collision"}],fa=[new Audio,new Audio,new Audio],ga={},ha=document.getElementById("background-music-1"),ia=document.getElementById("background-music-2"),ja=[{category:"bgm",name:"track_0",srcObj:ha,path:"assets/audio/bgm_daily_beetle"},{category:"bgm",name:"track_1",srcObj:ia,path:"assets/audio/bgm_vivacity"}],ka={},la="track_0",ma=[ea,ja],na=!1,oa=!1,pa=.3,qa=document.getElementById("checkbox-music"),ra=document.getElementById("checkbox-sound"),oa=qa.checked,na=ra.checked,sa=$(".side-panels").hide(),ta=$("body"),ua=$("#notifier"),va=$("#lives"),wa=[],xa=[],ya=null,za=null,Aa=!1,Ba=[],Ca=null,Da=null,Ea=!1,Fa=function(a){this.name=null,this.sprite=null,this.w=101,this.h=171,this.x=null,this.y=null};Fa.prototype.render=function(){Fb.drawImage(M.get(this.sprite),this.x,this.y)};var Ga=function(a){Fa.call(this),this.name="ground",this.sprite="assets/images/tile-ground.png"};Ga.prototype=Object.create(Fa.prototype),Ga.prototype.constructor=Ga;var Ha=function(a){Fa.call(this),this.name="grass",this.sprite="assets/images/tile-grass.png"};Ha.prototype=Object.create(Fa.prototype),Ha.prototype.constructor=Ha;var Ia=function(a){Fa.call(this),this.name="water",this.sprite="assets/images/tile-water.png"};Ia.prototype=Object.create(Fa.prototype),Ia.prototype.constructor=Ia;var Ja=function(a){Fa.call(this),this.name="rock",this.sprite="assets/images/tile-rock.png"};Ja.prototype=Object.create(Fa.prototype),Ja.prototype.constructor=Ja;var Ka=null,La=!1,Ma=[{name:"gem-blue",weight:.5},{name:"gem-green",weight:.35},{name:"gem-orange",weight:.135},{name:"heart",weight:.15}],Na=K.make_weighted(Ma),Oa=[0,101,202,303,404],Pa=function(a){this.name=null,this.sprite=null,this.x=null,this.y=null,this.w=101,this.h=171,this.points=null,this.bonusLife=!1,this.taken=!1};Pa.prototype={check_player_get:function(a){this.x===a.x&&this.y===a.y&&(this.taken=!0,"heart"===this.name&&(this.bonusLife=!0))},update:function(){this.taken&&(na&&j("start"),this.bonusLife?e():(Q+=this.points,P.text("Score "+Q)),this.activeTimer=!1,this.taken=!1,this.sprite="",La=!1)},render:function(){Fb.drawImage(M.get(this.sprite),this.x,this.y)}};var Qa=null,Ra=null,Sa=null,Ta=null,Ua=null,Va=null,Wa=null,Xa=null,Ya=null,Za=null,$a=null,_a=null,ab=null,bb=null,cb=null,db=null,eb=null,fb=null,gb=null,hb=null,ib=null,jb=[100,200,300],kb=[!0,!1],lb=-101,mb=505,nb=function(a){this.sprite=null,this.name=null,this.w=50,this.h=50,this.x=null,this.y=null,this.speed=null,this.fromLeft=!1};nb.prototype={update:function(a){this.fromLeft===!0?this.x=this.x+this.speed*a:this.x=this.x-this.speed*a},render:function(){Fb.drawImage(M.get(this.sprite),this.x,this.y)}};var ob=function(){nb.call(this),this.name="red1",this.sprite="assets/images/bug-red-right.png",this.fromLeft=null};ob.prototype=Object.create(nb.prototype),ob.prototype.constructor=ob;var pb=function(){nb.call(this),this.name="red2",this.sprite="assets/images/bug-red-right.png",this.fromLeft=null};pb.prototype=Object.create(nb.prototype),pb.prototype.constructor=pb;var qb=function(){nb.call(this),this.name="red3",this.sprite="assets/images/bug-red-right.png",this.x=O[1],this.fromLeft=null};qb.prototype=Object.create(nb.prototype),qb.prototype.constructor=qb;var rb=function(){nb.call(this),this.name="red4",this.sprite="assets/images/bug-red-right.png",this.x=O[2],this.fromLeft=null};rb.prototype=Object.create(nb.prototype),rb.prototype.constructor=rb;var sb=function(){nb.call(this),this.name="yellow",this.sprite="assets/images/bug-yellow-right.png"};sb.prototype=Object.create(nb.prototype),sb.prototype.constructor=sb;var tb=function(){nb.call(this),this.name="green",this.sprite="assets/images/bug-green-right.png",this.rowShift=!1};tb.prototype=Object.create(nb.prototype),tb.prototype.constructor=tb,tb.prototype.update=function(a){this.fromLeft===!0?(this.x=this.x+this.speed*a,this.rowShift===!0&&this.x>=O[1]&&this.y<N[3]&&(this.y=this.y+this.speed*a,Math.abs(this.y-N[3])<5&&(this.y=N[3]))):(this.x=this.x-this.speed*a,this.rowShift===!0&&this.x<=O[4]&&this.y>N[2]&&(this.y=this.y-this.speed*a,Math.abs(this.y-N[2])<5&&(this.y=N[2])))};var ub=function(){nb.call(this),this.name="blue"};ub.prototype=Object.create(nb.prototype),ub.prototype.constructor=ub,ub.prototype.update=function(a,b){this.x<b.x&&(this.sprite="assets/images/bug-blue-right.png",this.x=this.x+this.speed*a),this.x>b.x&&(this.sprite="assets/images/bug-blue-left.png",this.x=this.x-this.speed*a)};var vb=function(){nb.call(this),this.name="purple",this.sprite="assets/images/bug-purple-right.png",this.locked=!1};vb.prototype=Object.create(nb.prototype),vb.prototype.constructor=vb,vb.prototype.update=function(a,b){(this.fromLeft&&this.x>b.x||!this.fromLeft&&this.x<b.x)&&(this.locked=!0),this.locked?this.y=this.y+this.speed*a:this.fromLeft?this.x=this.x+this.speed*a:this.x=this.x-this.speed*a};var wb=["images/char-boy.png","images/char-cat-girl.png","images/char-horn-girl.png","images/char-pink-girl.png","images/char-princess-girl.png"],xb=[],yb=null,zb=!1,Ab=function(){this.sprite=null,this.w=50,this.h=50,this.x=O[2],this.y=N[5],this.collided=!1,this.leftLimit=!1,this.rightLimit=!1,this.topLimit=null,this.bottomLimit=!1,this.done=!1};Ab.prototype={handleInput:function(a){this.keyPressed=!0,"left"===a&&(this.x-=101),"right"===a&&(this.x+=101),"up"===a&&(this.y-=83),"down"===a&&(this.y+=83)},check_collision:function(a,b){for(I=0;I<a.length;I++)this.x<a[I].x+a[I].w&&this.x+this.w>a[I].x&&this.y<a[I].y+a[I].h&&this.y+this.h>a[I].y&&zb===!1&&(this.collided=!0);if(this.x+this.w>505&&(this.rightLimit=!0),this.x<0&&(this.leftLimit=!0),this.y+171>563&&(this.bottomLimit=!0),this.y<0)if(b.length)for(I=0;I<b.length;I++){if(this.x===b[I].x){this.topLimit=!1;break}this.topLimit=!0}else this.topLimit=!0},update:function(a){this.collided===!0&&(j("collision"),d(),this.x=O[2],this.y=N[5],zb=!0,this.collided=!1),this.leftLimit===!0&&(this.x=O[0],this.leftLimit=!1),this.rightLimit===!0&&(this.x=O[4],this.rightLimit=!1),this.topLimit===!0&&(this.y=N[0],this.done=!0),this.topLimit===!1&&0!==wb.length&&(this.y=N[1],this.done=!1),this.bottomLimit===!0&&(this.y=N[5],this.bottomLimit=!1),this.keyPressed=!1},render:function(){Fb.drawImage(M.get(this.sprite),this.x,this.y)}},document.addEventListener("keyup",function(a){var b={37:"left",38:"up",39:"right",40:"down"};yb&&yb.handleInput(b[a.keyCode])});var Bb=null,Cb={map01:[[1,1,1,1,1],[2,2,2,2,2],[2,2,2,2,2],[2,2,2,2,2],[2,2,2,2,2],[1,1,1,1,1]],map02:[[1,1,1,1,1],[2,2,2,2,2],[2,2,4,2,2],[2,2,2,2,2],[2,2,2,2,2],[1,1,1,1,1]],map03:[[1,1,1,1,1],[2,2,2,2,2],[2,2,2,2,2],[2,3,2,3,2],[2,2,2,2,2],[1,1,1,1,1]],map04:[[1,1,1,1,1],[2,2,2,2,2],[2,4,2,4,2],[2,2,2,2,2],[2,2,4,2,2],[1,1,1,1,1]],map05:[[1,1,1,1,1],[2,2,2,2,2],[5,3,5,3,5],[2,2,2,2,2],[3,5,3,5,3],[1,1,1,1,1]]},Db=0;!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var Eb=document.createElement("canvas"),Fb=Eb.getContext("2d"),Gb=$("#game-window");Eb.width=505,Eb.height=606,Gb.append(Eb);var Hb=$("canvas"),Ib=null,Jb=!1,Kb=!1,Lb=!1,Mb=!1,Nb=!1,Ob=!1,Pb={g:"assets/images/tile-grass.png",b:"assets/images/tile-ground.png",w:"assets/images/tile-water.png",r:"assets/images/tile-rock.png"};M.load(["assets/images/tile-ground.png","assets/images/tile-water.png","assets/images/tile-grass.png","assets/images/tile-rock.png","assets/images/bug-red-right.png","assets/images/bug-red-left.png","assets/images/bug-yellow-right.png","assets/images/bug-yellow-left.png","assets/images/bug-green-right.png","assets/images/bug-green-left.png","assets/images/bug-blue-right.png","assets/images/bug-blue-left.png","assets/images/bug-purple-right.png","assets/images/bug-purple-left.png","assets/images/char-boy.png","assets/images/char-cat-girl.png","assets/images/char-horn-girl.png","assets/images/char-pink-girl.png","assets/images/char-princess-girl.png","assets/images/gem-blue.png","assets/images/gem-green.png","assets/images/gem-orange.png","assets/images/heart.png","assets/images/cartridge.png"]),M.onReady(H),window.onkeyup=function(a){83===a.keyCode&&Kb===!1&&(Nb!==!0&&Ob!==!0&&Lb!==!0||(Q=0,P.text("Score "+Q),oa=qa.checked,na=ra.checked,f(),na===!0&&j("start"),oa===!0&&h(),H()))}},{"./behaviors":1,"./randtools":3,"./resources":4}],3:[function(a,b,c){"use strict";function d(a,b){return b=Math.ceil(b),a=Math.floor(a),Math.floor(Math.random()*a+b)}function e(a){var b,c,d;for(b=a.length-1;b>0;--b)c=Math.floor(Math.random()*(b+1)),d=a[b],a[b]=a[c],a[c]=d;return a}function f(a){for(var b=[],c=0;c<a.length;c++)for(var d=1e3*a[c].weight,f=0;f<d;f++)b.push(a[c].name);return e(b)}b.exports={gen_rand_index:d,shuffle:e,make_weighted:f}},{}],4:[function(a,b,c){"use strict";function d(a){a instanceof Array?a.forEach(function(a){e(a)}):e(a)}function e(a){if(i[a])return i[a];var b=new Image;b.onload=function(){i[a]=b,g()&&j.forEach(function(a){a()})},i[a]=!1,b.src=a}function f(a){return i[a]}function g(){var a=!0;for(var b in i)i.hasOwnProperty(b)&&!i[b]&&(a=!1);return a}function h(a){j.push(a)}var i={},j=[];b.exports={load:d,get:f,onReady:h,isReady:g}},{}]},{},[2]);
//# sourceMappingURL=../_dev/_ignore/sourcemap.map