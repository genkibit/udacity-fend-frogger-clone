!function(){function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){return e(b[g][1][a]||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}return a}()({1:[function(a,b,c){"use strict";function d(a,b){var c=null;for(c in e){if(a.hasOwnProperty(c))throw"Entity property conflict!: "+c;a[c]=e[c]}b.forEach(function(b){for(c in b)a[c]=b[c]})}var e={startTime:0,elapsedTime:null,timeLimit:null,activeTimer:!1,penaltyTile:!1,topBlock:!1,rightBlock:!1,bottomBlock:!1,leftBlock:!1,blockCollision:!1,playerLastX:null,playerLastY:null},f={start_timer:function(){this.startTime=new Date,this.activeTimer=!0},stop_timer:function(){this.startTime=0,this.activeTimer=!1},update_timer:function(a){!0===this.activeTimer&&(this.elapsedTime=parseInt((new Date-this.startTime)/1e3,10),this.elapsedTime>a&&this.stop_timer())}},g={check_collision:function(a){this.x===a.x&&this.y===a.y?this.penaltyTile=!0:this.penaltyTile=!1},update:function(a){this.check_collision(a),!0===this.penaltyTile&&a.y===this.y&&a.x===this.x&&(a.collided=!0)}},h={check_collision:function(a){this.x===a.x&&this.y===a.y&&(this.blockCollision=!0,this.playerLastY<this.y&&(this.topBlock=!0),this.playerLastX>this.x&&(this.rightBlock=!0),this.playerLastY>this.y&&(this.bottomBlock=!0),this.playerLastX<this.x&&(this.leftBlock=!0))},update:function(a){this.check_collision(a),!0===this.blockCollision&&(!0===this.topBlock&&(a.y=this.y-83,a.x=this.x,this.topBlock=!1),!0===this.rightBlock&&(a.x=this.x+101,a.y=this.y,this.rightBlock=!1),!0===this.bottomBlock&&(a.y=this.y+83,a.x=this.x,this.bottomBlock=!1),!0===this.leftBlock&&(a.x=this.x-101,a.y=this.y,this.leftBlock=!1),this.blockCollision=!1),this.playerLastX=a.x,this.playerLastY=a.y}};b.exports={set_timer:f,take_life:g,impassable:h,add_behaviors:d}},{}],2:[function(a,b,c){"use strict";function d(){U-=1;var a=$(".lives");a&&a[0].remove()}function e(){U+=1,U<=5?xa.append('<img class="lives" src="assets/images/heart-small.png">'):xa.html('<img class="lives" src="assets/images/heart-small.png"> x '+U)}function f(){na.forEach(function(a){a.forEach(function(a){var b=g(a.srcObj);a.srcObj.src=a.path+b,a.srcObj.volume=pa,a.srcObj.load(),"sfx"===a.category?ha[a.name]=a.srcObj:"bgm"===a.category?(a.srcObj.loop=!0,la[a.name]=a.srcObj):(ua.css("display","block").text("Error loading audio. See browser console for details."),console.error('Error: @loadAudio -- Audio catgeory can only be "sfx" or "bgm"'))})})}function g(a){var b=null;return""!==a.canPlayType("audio/mpeg")&&(b=".mp3"),""!==a.canPlayType("audio/ogg")&&(b=".ogg"),b}function h(){var a=la[ma];!0===oa?a.play():a.pause()}function i(a){return!a.ended&&a.currentTime>0}function j(a){var b=null,c=null;if(b=ha[a],oa)if(i(b)){for(va=0;va<ga.length;va++)if(c=ga[va],!i(c)){c.src=b.currentSrc,c.load(),c.volume=b.volume,c.play(),ga=[new Audio,new Audio,new Audio];break}}else b.play()}function k(){oa=!oa,!0===oa?qa.text("off"):qa.text("on"),h()}function l(a,b,c){var d=null,e=null;switch(a){case"ground":d=new Ia,e=[];break;case"grass":d=new Ja,e=[];break;case"water":d=new Ka,e=[N.take_life];break;case"rock":d=new La,e=[N.impassable]}return d.x=b,d.y=c,N.add_behaviors(d,e),d}function m(a,b){var c=0,d=M.shuffle([0,101,202,303,404]),e=M.shuffle([143,226,309]),f=[b],g=null,h=null;for(va=0;va<d.length;va++){var i=a[va];if(void 0!==i)for(i.x=d[va],g=0;g<e.length;g++){for(i.y=e[g],h=0;h<f.length;h++){var j=f[h];(i.x===b.x&&i.y===b.y||i.x===j.x+101||i.x===j.x-101||i.x===j.y+83)&&(i.x=d[va+1],i.y=e[g+1])}if(f.push(i),++c>a.length)break}}}function n(a){for(va=0;va<a;va++)Ea=l("rock",null,null),Da.push(Ea);m(Da,hb)}function o(a){for(va=0;va<a;va++)Aa=l("water",null,null),za.push(Aa);m(za,hb),za.forEach(function(a){void 0!==a&&ya.push(a)})}function p(){var a=M.gen_rand_index(Pa.length-1,0),b=Pa[a],c=Qa[M.gen_rand_index(4,0)],d=P[0],e=[N.set_timer],f=new Ra;switch(f.name=b,f.x=c,f.y=d,f.name){case"gem-blue":f.sprite="assets/images/gem-blue.png",f.points=5;break;case"gem-green":f.sprite="assets/images/gem-green.png",f.points=10;break;case"gem-orange":f.sprite="assets/images/gem-orange.png",f.points=15;break;case"heart":f.sprite="assets/images/heart.png",f.bonusLife=!0}return N.add_behaviors(f,e),f}function q(a,b){if(a.name.match(/^red[1-4]/))!1===a.fromLeft&&(a.sprite=O.get("assets/images/bug-red-left.png"));else if("blue"!==a.name)if(!0===a.fromLeft)a.x=Ta;else{a.x=Ua;var c="assets/images/bug-"+a.name+"-left.png";a.sprite=O.get(c)}else a.sprite=O.get("assets/images/bug-blue-right.png");Sa.push(a)}function r(a){var b=null;switch(a){case"red1":b=new Xa;break;case"red2":b=new Ya;break;case"red3":b=new Za;break;case"red4":b=new $a;break;case"yellow":b=new ab;break;case"green":b=new bb;break;case"blue":b=new cb;break;case"purple":b=new db}return b}function s(){var a=null;return a=new ib,gb=!0,a}function t(a){var b=null,c=null;return 2===lb&&(lb=0),c=M.gen_rand_index(50,25),b=lb*c,lb++,a+b}function u(a,b,c,d){var e=null,f=null,g=null,h=null;if(a)for(va=0;va<a.num;va++)e=r("red1"),e.x=a.xPos[va],e.speed=a.speed,e.fromLeft=a.dir,q(e);if(b)for(va=0;va<b.num;va++)f=r("red2"),f.x=b.xPos[va],f.speed=b.speed,f.fromLeft=b.dir,q(f);if(c)for(va=0;va<c.num;va++)g=r("red3"),g.x=c.xPos[va],g.speed=c.speed,g.fromLeft=c.dir,q(g);if(d)for(va=0;va<d.num;va++)h=r("red4"),h.x=d.xPos[va],h.speed=d.speed,h.fromLeft=d.dir,q(h)}function v(a,b,c,d){var e=null,f=null,g=null,h=null;if(a)for(va=0;va<a.num;va++)e=r("yellow"),q(e);if(b)for(va=0;va<b.num;va++)f=r("green"),q(f);if(c)for(va=0;va<c.num;va++)g=r("blue"),g.y=c.yPos[va],q(g);if(d)for(va=0;va<d.num;va++)h=r("purple"),q(h)}function w(a){var b=null,c=null,d=null,e=null,f=null,g=null,h=null,i=null;1===a?(jb=kb.map01,b={num:1,xPos:[Q[0]],speed:t(35),dir:!1},c={num:2,xPos:[Q[2],Q[4]],speed:t(35),dir:!0},d={num:1,xPos:[Q[3]],speed:t(35),dir:!0},e={num:2,xPos:[Q[0],Q[4]],speed:t(35),dir:!1}):2===a?(jb=kb.map01,b={num:2,xPos:[Q[0],Q[3]],speed:t(45),dir:!0},c={num:1,xPos:[Q[4]],speed:t(45),dir:!0},d={num:2,xPos:[Q[1],Q[4]],speed:t(45),dir:!1},e={num:2,xPos:[Q[0],Q[4]],speed:t(45),dir:!1}):3===a?(jb=kb.map01,b={num:2,xPos:[Q[0],Q[2]],speed:t(55),dir:!0},c={num:2,xPos:[Q[2],Q[4]],speed:t(55),dir:!1},d={num:2,xPos:[Q[1],Q[3]],speed:t(55),dir:!0},e={num:2,xPos:[Q[0],Q[4]],speed:t(55),dir:!1}):4===a?(jb=kb.map01,b={num:2,xPos:[Q[0],Q[3]],speed:t(35),dir:!1},c={num:1,xPos:[Q[2]],speed:t(35),dir:!1},e={num:2,xPos:[Q[1],Q[4]],speed:t(35),dir:!1},f=null,g={num:1},h=null,i=null):5===a?(jb=kb.map01,b={num:3,xPos:[Q[0],Q[2],Q[3]],speed:t(45),dir:!0},e={num:2,xPos:[Q[0],Q[4]],speed:t(45),dir:!0},f=null,g={num:2},h=null,i=null):6===a?(jb=kb.map02,b={num:2,xPos:[Q[0],Q[2]],speed:t(25),dir:!1},e={num:2,xPos:[Q[0],Q[3]],speed:t(55),dir:!0},f=null,g={num:1},h=null,i=null):7===a?(jb=kb.map02,b={num:2,xPos:[Q[0],Q[4]],speed:t(35),dir:!1},d={num:1,xPos:[Q[3]],speed:t(35),dir:!0},e={num:2,xPos:[Q[0],Q[3]],speed:t(35),dir:!0},f=null,g={num:1},h=null,i=null):8===a?(jb=kb.map02,b={num:2,xPos:[Q[1],Q[4]],speed:t(45),dir:!1},e={num:2,xPos:[Q[0],Q[2]],speed:t(45),dir:!1},f={num:1},g={num:1},h=null,i=null):9===a?(jb=kb.map03,b={num:2,xPos:[Q[2],Q[4]],speed:t(55),dir:!0},e={num:2,xPos:[Q[0],Q[2]],speed:t(55),dir:!1},f={num:1},g={num:null},h=null,i=null):10===a?(jb=kb.map03,b={num:3,xPos:[Q[1],Q[2],Q[4]],speed:t(35),dir:!0},e={num:1,xPos:[Q[3]],speed:t(35),dir:!1},f={num:1},g={num:1},h=null,i=null):11===a?(jb=kb.map03,b={num:2,xPos:[Q[1],Q[3]],speed:t(45),dir:!0},e={num:1,xPos:[Q[4]],speed:t(45),dir:!0},f={num:1},g=null,h=null,i={num:1}):12===a?(jb=kb.map04,d={num:1,xPos:[Q[4]],speed:t(55),dir:!1},f={num:2},g=null,h=null,i={num:1}):13===a?(jb=kb.map04,d={num:1,xPos:[Q[4]],speed:t(125),dir:!1},f={num:1},g={num:1},h=null,i={num:1}):14===a?(jb=kb.map04,b={num:1,xPos:[Q[2]],speed:t(35),dir:!0},f={num:2},g=null,h=null,i={num:1}):15===a?(jb=kb.map01,c={num:1,xPos:[Q[3]],speed:t(75),dir:!1},e={num:1,xPos:[Q[4]],speed:t(45),dir:!0},f={num:1},g={num:1},h={num:1,yPos:[P[1]]},i=null,Fa=3,Ga=!0):16===a?(jb=kb.map01,e={num:1,xPos:[Q[4]],speed:t(100),dir:!0},f={num:1},g=null,h={num:1,yPos:[P[1]]},i={num:1},Fa=3,Ga=!0):17===a?(jb=kb.map01,d={num:1,xPos:[Q[4]],speed:t(100),dir:!0},f={num:2},g={num:1},h=null,i={num:1},Ba=3,Ca=!0):18===a?(jb=kb.map01,f={num:3},g=null,h={num:1,yPos:[P[1]]},i=null,Ba=3,Ca=!0):19===a?(jb=kb.map05,f={num:2},g=null,h={num:1,yPos:[P[3]]},i=null):20===a?(jb=kb.map05,b={num:1,xPos:[Q[4]],speed:t(100),dir:!0},f={num:2},g={num:1},h=null,i={num:1}):(vb=!0,wb=!0),x(jb),u(b,c,d,e),v(f,g,h,i),hb=s(),hb.sprite=eb[M.gen_rand_index(eb.length-1,0)],Ga&&n(Fa,hb),Ca&&o(Ba,hb)}function x(a){for(var b=null,c=a.length,d=null,e=null,f=0;f<c;f++){d=a[f],e=d.length;for(var g=0;g<e;g++)1!==d[g]&&2!==d[g]&&(3===d[g]&&(b=l("water",Q[g],P[f])),4===d[g]&&(b=l("rock",Q[g],P[f])),b&&("rock"===b.name?Da.push(b):ya.push(b)))}}function y(){sb=!0;nb.drawImage(O.get("assets/images/cartridge.png"),0,0),pb.click(function(){sb=!1,sa.css("backgroundImage","none"),ra.animate({opacity:1}),ta.animate({opacity:1}),pb.off(),B(mb.width/2,mb.height/2)})}function z(){ub=!0;var a=null;rb=!1,nb.fillStyle="rgba(0, 150, 255, 1.0)",nb.clearRect(0,0,mb.width,mb.height),nb.fillRect(0,0,mb.width,mb.height),nb.font='16pt "Press Start 2P"',nb.textAlign="center",nb.fillStyle="rgba(255, 255, 255, 1.0)",nb.fillText("Level "+W,mb.width/2,mb.height/2-100),nb.fillText("Get Ready!",mb.width/2,mb.height/2-50),a=window.setTimeout(function(){ub=!1,W>1?(window.clearTimeout(a),D(W)):(window.clearTimeout(a),w(1),rb=!0,K())},3e3)}function A(){var a=["red1","yellow","green","blue","purple"],b=[],c=null;for(va=0;va<a.length;va++)c=r(a[va]),b.push(c);return b}function B(a,b){tb=!0;var c=0,d=0,e=null,f=P[3],g=A(),h=0;g=M.shuffle(g);var i=g[h];i.x=a,i.y=b;var j=function(){nb.fillStyle="rgba(0, 150, 255, 1.0)",nb.fillRect(0,0,mb.width,mb.height),nb.font='16pt "Press Start 2P"',nb.textAlign="center",nb.fillStyle="rgba(255, 255, 255, 1.0)",nb.fillText("Bug Frenzy",mb.width/2,mb.height/2-100),nb.fillText('Press "S" to start',mb.width/2,mb.height/2-50),c===mb.width?(h++,i=g[h],c=-101,f=P[M.gen_rand_index(5,1)]):(c++,d=f+10*Math.sin(c/10%360)),4===h&&(h=0),i.x=c,i.y=d,i.render(),!0===tb?e=window.requestAnimationFrame(function(){j()}):(window.cancelAnimationFrame(e),e=null,z())};!0===tb&&j()}function C(){rb=!1,pb.off(),nb.font='14pt "Press Start 2P"',nb.textAlign="center",nb.fillStyle="rgba(0, 0, 0, 0.5)",nb.fillRect(0,0,mb.width,mb.height),nb.fillStyle="#ffffff",f(),!0===vb&&!0===wb?(ma="track_1",h(),nb.fillText("Congratulations!",mb.width/2,mb.height/2-150),nb.fillText("You survived the frenzy",mb.width/2,mb.height/2-100),nb.fillText("Thanks for playing",mb.width/2,mb.height/2-50),nb.fillText("Score "+S,mb.width/2,mb.height/2),nb.fillText('Press "S" to start again',mb.width/2,mb.height/2+100)):(nb.fillText("GAME OVER!",mb.width/2,mb.height/2-100),nb.fillText("Score "+S,mb.width/2,mb.height/2),nb.fillText('Press "S" to start again.',mb.width/2,mb.height/2+100))}function D(a){V.text(a),L(),w(a),rb=!0,Z=(new Date).getTime(),qb=Date.now(),E()}function E(){var a=Date.now();F((a-qb)/1e3,a),J(),qb=a,rb&&window.requestAnimationFrame(E)}function F(a,b){var c=null,d=1800-parseInt((b-Z)/1e3);for(!0===hb.keyPressed&&(gb=!1),va=0,wa=Sa.length;va<wa;va++)Sa[va].name.match(/^red[1-4]/)?Sa[va].x>mb.width?Sa[va].x=Ta:Sa[va].x<-101&&(Sa[va].x=Ua):"purple"!==Sa[va].name&&Sa[va].x>mb.width||Sa[va].x<-101?(c=r(Sa[va].name),q(c),Sa.splice(va,1)):Sa[va].y>P[5]&&(c=r(Sa[va].name),q(c),Sa.splice(va,1));if(!0===hb.done){fb.push(hb);var e=eb.indexOf(hb.sprite);if(eb.splice(e,1),!0===Na&&Ma.checkPlayerGet(hb),5===fb.length){S+=d*T,R.text(S),W+=1,W!==X+1?ub=!0:(wb=!0,vb=!0)}else Qa.forEach(function(a){if(hb.x===a){var b=Qa.indexOf(a);Qa.splice(b,1)}}),hb=s(),hb.sprite=eb[M.gen_rand_index(eb.length-1,0)]}0===U&&(vb=!0),0===d&&(hb.collided=!0,Z=(new Date).getTime()),hb.checkCollision(Sa,fb),parseInt(b/1e3)%20==0&&!1===Na&&Qa.length&&(Ma=p(),Ma.start_timer(),Na=!0),d!==ba&&Y.text(d),ba=d,G(a)}function G(a){if(ya.length)for(va=0,wa=ya.length;va<wa;va++)ya[va].update(hb);for(va=0,wa=Sa.length;va<wa;va++)Sa[va].update(a,hb);for(hb.update(),va=0,wa=Da.length;va<wa;va++)Da[va].update(hb);for(va=0,wa=za.length;va<wa;va++)za[va].update(hb);null!==Ma&&!0===Ma.activeTimer&&!0===Na?(Ma.update_timer(7),Ma.update()):Na=!1}function H(a){for(var b=null,c=0;c<a.length;c++)for(var d=a[c],e=0;e<d.length;e++){var f;if(1===d[e]&&(f=xb.g),2===d[e]&&(f=xb.b),3===d[e]&&(f=xb.w),5===d[e]&&(f=xb.b),ya.length)for(va=0,wa=ya.length;va<wa;va++)b=ya[va],b.x===Q[e]&&b.y===P[c]&&(f=b.sprite);nb.drawImage(O.get(f),101*e,83*c)}}function I(){for(va=0,wa=fb.length;va<wa;va++)fb[va].render();for(va=0,wa=Sa.length;va<wa;va++)Sa[va].render();for(null!==Ma&&!0===Ma.activeTimer&&!0===Na&&Ma.render(),va=0,wa=Da.length;va<wa;va++)Da[va].render();!0===vb||!0===wb?C():!0===ub?z():hb.render()}function J(){nb.clearRect(0,0,mb.width,mb.height),H(jb),I()}function K(){S=0,R.text(S),Z=(new Date).getTime(),qb=Date.now(),E()}function L(){if(Fa=null,Ba=null,Ga=!1,Ca=!1,eb=["assets/images/char-boy.png","assets/images/char-cat-girl.png","assets/images/char-horn-girl.png","assets/images/char-pink-girl.png","assets/images/char-princess-girl.png"],fb=[],Qa=[0,101,202,303,404],Sa=[],Da=[],za=[],ya=[],Z=null,_=null,aa=null,ba=null,ma="track_0",V.text(W),!1===sb)if(!0===tb)for(tb=!1,W=1,va=0;va<3;va++)e();else{if(!1===vb&&W>1)return;if(!0===vb){for(vb=!1,wb=!1,$(".lives").remove(),va=0;va<3;va++)xa.append('<img class="lives" src="assets/images/heart-small.png">');U=3,W=1,V.text("1"),z()}else y()}}var M=a("./randtools"),N=a("./behaviors"),O=a("./resources"),P=[-43,60,143,226,309,392],Q=[0,101,202,303,404],R=$(".hud__score"),S=null,T=1,U=null,V=$(".hud__level"),W=1,X=20,Y=$(".hud__time"),Z=null,_=null,aa=null,ba=null,ca=document.getElementById("blip"),da=document.getElementById("blip"),ea=document.getElementById("ouch"),fa=[{category:"sfx",name:"start",srcObj:ca,path:"assets/audio/sfx_blip"},{category:"sfx",name:"gem",srcObj:da,path:"assets/audio/sfx_blip"},{category:"sfx",name:"collision",srcObj:ea,path:"assets/audio/sfx_collision"}],ga=[new Audio,new Audio,new Audio],ha={},ia=document.getElementById("background-music-1"),ja=document.getElementById("background-music-2"),ka=[{category:"bgm",name:"track_0",srcObj:ia,path:"assets/audio/bgm_daily_beetle"},{category:"bgm",name:"track_1",srcObj:ja,path:"assets/audio/bgm_vivacity"}],la={},ma="track_0",na=[fa,ka],oa=!1,pa=.3,qa=$(".hud__audio"),ra=$(".hud").css("opacity",0),sa=$("body"),ta=$(".footer").css("opacity",0),ua=$(".notifier"),va=null,wa=null,xa=$(".hud__lives");$(".hud__audio-btn").click(k);var ya=[],za=[],Aa=null,Ba=null,Ca=!1,Da=[],Ea=null,Fa=null,Ga=!1,Ha=function(a){this.name=null,this.sprite=null,this.w=101,this.h=171,this.x=null,this.y=null};Ha.prototype.render=function(){nb.drawImage(O.get(this.sprite),this.x,this.y)};var Ia=function(a){Ha.call(this),this.name="ground",this.sprite="assets/images/tile-ground.png"};Ia.prototype=Object.create(Ha.prototype),Ia.prototype.constructor=Ia;var Ja=function(a){Ha.call(this),this.name="grass",this.sprite="assets/images/tile-grass.png"};Ja.prototype=Object.create(Ha.prototype),Ja.prototype.constructor=Ja;var Ka=function(a){Ha.call(this),this.name="water",this.sprite="assets/images/tile-water.png"};Ka.prototype=Object.create(Ha.prototype),Ka.prototype.constructor=Ka;var La=function(a){Ha.call(this),this.name="rock",this.sprite="assets/images/tile-rock.png"};La.prototype=Object.create(Ha.prototype),La.prototype.constructor=La;var Ma=null,Na=!1,Oa=[{name:"gem-blue",weight:.5},{name:"gem-green",weight:.35},{name:"gem-orange",weight:.25},{name:"heart",weight:.1}],Pa=M.make_weighted(Oa),Qa=[0,101,202,303,404],Ra=function(a){this.name=null,this.sprite=null,this.x=null,this.y=null,this.w=101,this.h=171,this.points=null,this.bonusLife=!1,this.taken=!1};Ra.prototype={checkPlayerGet:function(a){this.x===a.x&&this.y===a.y&&(this.taken=!0,"heart"===this.name&&(this.bonusLife=!0))},update:function(){this.taken&&(oa&&j("start"),this.bonusLife?e():(S+=this.points,R.text(S)),this.activeTimer=!1,this.taken=!1,this.sprite="",Na=!1)},render:function(){nb.drawImage(O.get(this.sprite),this.x,this.y)}};var Sa=[],Ta=-101,Ua=505,Va=[!0,!1],Wa=function(a){this.sprite=null,this.name=null,this.w=50,this.h=50,this.x=null,this.y=null,this.speed=null,this.fromLeft=!1};Wa.prototype={update:function(a){!0===this.fromLeft?this.x=this.x+this.speed*a:this.x=this.x-this.speed*a},render:function(){try{nb.drawImage(this.sprite,this.x,this.y)}catch(a){ua.css("display","block").text("An error has occurred. Reloading the game may resolve this."),console.log("Error: @Enemy.render() -- ",a)}}};var Xa=function(){Wa.call(this),this.name="red1",this.sprite=O.get("assets/images/bug-red-right.png"),this.x=Q[2],this.y=P[1],this.speed=null,this.fromLeft=null};Xa.prototype=Object.create(Wa.prototype),Xa.prototype.constructor=Xa;var Ya=function(){Wa.call(this),this.name="red2",this.sprite=O.get("assets/images/bug-red-right.png"),this.x=Q[2],this.y=P[2],this.speed=null,this.fromLeft=null};Ya.prototype=Object.create(Wa.prototype),Ya.prototype.constructor=Ya;var Za=function(){Wa.call(this),this.name="red3",this.sprite=O.get("assets/images/bug-red-right.png"),this.x=Q[1],this.y=P[3],this.speed=null,this.fromLeft=null};Za.prototype=Object.create(Wa.prototype),Za.prototype.constructor=Za;var $a=function(){Wa.call(this),this.name="red4",this.sprite=O.get("assets/images/bug-red-right.png"),this.x=Q[2],this.y=P[4],this.speed=null,this.fromLeft=null};$a.prototype=Object.create(Wa.prototype),$a.prototype.constructor=$a;var _a=[100,200,300],ab=function(){Wa.call(this),this.name="yellow",this.sprite=O.get("assets/images/bug-yellow-right.png"),this.y=P[M.gen_rand_index(3,1)],this.speed=_a[M.gen_rand_index(2,0)],this.fromLeft=Va[M.gen_rand_index(1,0)]};ab.prototype=Object.create(Wa.prototype),ab.prototype.constructor=ab;var bb=function(){Wa.call(this),this.name="green",this.sprite=O.get("assets/images/bug-green-right.png"),this.y=P[M.gen_rand_index(3,2)],this.speed=M.gen_rand_index(125,100),this.fromLeft=Va[M.gen_rand_index(1,0)],this.topRowShift=!1,this.bottomRowShift=!1};bb.prototype=Object.create(Wa.prototype),bb.prototype.constructor=bb,bb.prototype.update=function(a){!0===this.fromLeft?(this.x=this.x+this.speed*a,this.x>=Q[1]&&(this.y<P[3]&&!1===this.bottomRowShift&&(this.topRowShift=!0,this.y=this.y+this.speed*a,Math.abs(this.y-P[3])<5&&(this.y=P[3],this.x-this.w>Q[4]&&(this.topRowShift=!1))),this.y>P[2]&&!1===this.topRowShift&&(this.bottomRowShift=!0,this.y=this.y-this.speed*a,Math.abs(this.y-P[2])<5&&(this.y=P[2],this.x-this.w>Q[4]&&(this.bottomRowShift=!1))))):(this.x=this.x-this.speed*a,this.x<=Q[3]&&(this.y<P[3]&&!1===this.bottomRowShift&&(this.topRowShift=!0,this.y=this.y+this.speed*a,Math.abs(this.y-P[3])<5&&(this.y=P[3],this.x-this.w<Q[0]&&(this.topRowShift=!1))),this.y>P[2]&&!1===this.topRowShift&&(this.bottomRowShift=!0,this.y=this.y-this.speed*a,Math.abs(this.y-P[2])<5&&(this.y=P[2],this.x-this.w<Q[0]&&(this.bottomRowShift=!1)))))};var cb=function(){Wa.call(this),this.name="blue",this.sprite=O.get("assets/images/bug-blue-right.png"),this.x=Q[2],this.y=null,this.speed=25};cb.prototype=Object.create(Wa.prototype),cb.prototype.constructor=cb,cb.prototype.update=function(a,b){this.x<b.x&&(this.sprite=O.get("assets/images/bug-blue-right.png"),this.x=this.x+this.speed*a),this.x>b.x&&(this.sprite=O.get("assets/images/bug-blue-left.png"),this.x=this.x-this.speed*a)};var db=function(){Wa.call(this),this.name="purple",this.sprite=O.get("assets/images/bug-purple-right.png"),this.y=P[1],this.speed=M.gen_rand_index(125,100),this.fromLeft=Va[M.gen_rand_index(1,0)],this.locked=!1};db.prototype=Object.create(Wa.prototype),db.prototype.constructor=db,db.prototype.update=function(a,b){(this.fromLeft&&this.x>b.x||!this.fromLeft&&this.x<b.x)&&(this.locked=!0),this.locked?this.y=this.y+this.speed*a:this.fromLeft?this.x=this.x+this.speed*a:this.x=this.x-this.speed*a};var eb=["images/char-boy.png","images/char-cat-girl.png","images/char-horn-girl.png","images/char-pink-girl.png","images/char-princess-girl.png"],fb=[],gb=!1,hb=null,ib=function(){this.sprite=null,this.w=50,this.h=50,this.x=Q[2],this.y=P[5],this.collided=!1,this.leftLimit=!1,this.rightLimit=!1,this.topLimit=null,this.bottomLimit=!1,this.done=!1};ib.prototype={handleInput:function(a){this.keyPressed=!0,"left"===a&&(this.x-=101),"right"===a&&(this.x+=101),"up"===a&&(this.y-=83),"down"===a&&(this.y+=83)},checkCollision:function(a,b){for(va=0;va<a.length;va++)this.x<a[va].x+a[va].w&&this.x+this.w>a[va].x&&this.y<a[va].y+a[va].h&&this.y+this.h>a[va].y&&!1===gb&&(this.collided=!0);if(this.x+this.w>505&&(this.rightLimit=!0),this.x<0&&(this.leftLimit=!0),this.y+171>563&&(this.bottomLimit=!0),this.y<0)if(b.length)for(va=0;va<b.length;va++){if(this.x===b[va].x){this.topLimit=!1;break}this.topLimit=!0}else this.topLimit=!0},update:function(a){!0===this.collided&&(j("collision"),d(),this.x=Q[2],this.y=P[5],gb=!0,this.collided=!1),!0===this.leftLimit&&(this.x=Q[0],this.leftLimit=!1),!0===this.rightLimit&&(this.x=Q[4],this.rightLimit=!1),!0===this.topLimit&&(this.y=P[0],this.done=!0),!1===this.topLimit&&0!==eb.length&&(this.y=P[1],this.done=!1),!0===this.bottomLimit&&(this.y=P[5],this.bottomLimit=!1),this.keyPressed=!1},render:function(){nb.drawImage(O.get(this.sprite),this.x,this.y)}},document.addEventListener("keyup",function(a){var b={37:"left",38:"up",39:"right",40:"down"};hb&&hb.handleInput(b[a.keyCode])});var jb=null,kb={map01:[[1,1,1,1,1],[2,2,2,2,2],[2,2,2,2,2],[2,2,2,2,2],[2,2,2,2,2],[1,1,1,1,1]],map02:[[1,1,1,1,1],[2,2,2,2,2],[2,2,4,2,2],[2,2,2,2,2],[2,2,2,2,2],[1,1,1,1,1]],map03:[[1,1,1,1,1],[2,2,2,2,2],[2,3,2,2,2],[2,2,2,3,2],[2,2,2,2,2],[1,1,1,1,1]],map04:[[1,1,1,1,1],[2,2,2,2,2],[2,4,2,4,2],[2,2,2,2,2],[2,2,4,2,2],[1,1,1,1,1]],map05:[[1,1,1,1,1],[2,2,2,2,2],[5,3,5,3,5],[2,2,2,2,2],[3,5,3,5,3],[1,1,1,1,1]]},lb=0;!function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var mb=document.createElement("canvas"),nb=mb.getContext("2d"),ob=$(".game-window");mb.width=505,mb.height=606,mb.className="canvas canvas--split-view",ob.append(mb);var pb=$("canvas"),qb=null,rb=!1,sb=!1,tb=!1,ub=!1,vb=!1,wb=!1,xb={g:"assets/images/tile-grass.png",b:"assets/images/tile-ground.png",w:"assets/images/tile-water.png",r:"assets/images/tile-rock.png"};O.load(["assets/images/tile-ground.png","assets/images/tile-water.png","assets/images/tile-grass.png","assets/images/tile-rock.png","assets/images/bug-red-right.png","assets/images/bug-red-left.png","assets/images/bug-yellow-right.png","assets/images/bug-yellow-left.png","assets/images/bug-green-right.png","assets/images/bug-green-left.png","assets/images/bug-blue-right.png","assets/images/bug-blue-left.png","assets/images/bug-purple-right.png","assets/images/bug-purple-left.png","assets/images/char-boy.png","assets/images/char-cat-girl.png","assets/images/char-horn-girl.png","assets/images/char-pink-girl.png","assets/images/char-princess-girl.png","assets/images/gem-blue.png","assets/images/gem-green.png","assets/images/gem-orange.png","assets/images/heart.png","assets/images/cartridge.png"]),O.onReady(L),window.onkeyup=function(a){83===a.keyCode&&!1===sb&&(!0!==vb&&!0!==wb&&!0!==tb||(S=0,R.text(S),f(),!0===oa&&(j("start"),ma="track_0",h()),L()))}},{"./behaviors":1,"./randtools":3,"./resources":4}],3:[function(a,b,c){"use strict";function d(a,b){return b=Math.ceil(b),a=Math.floor(a),Math.floor(Math.random()*(a-b+1)+b)}function e(a){var b=null,c=null,d=null;for(b=a.length-1;b>0;--b)c=Math.floor(Math.random()*(b+1)),d=a[b],a[b]=a[c],a[c]=d;return a}function f(a){for(var b=[],c=0;c<a.length;c++)for(var d=1e3*a[c].weight,f=0;f<d;f++)b.push(a[c].name);return e(b)}b.exports={gen_rand_index:d,shuffle:e,make_weighted:f}},{}],4:[function(a,b,c){"use strict";function d(a){a instanceof Array?a.forEach(function(a){e(a)}):e(a)}function e(a){if(i[a])return i[a];var b=new Image;b.onload=function(){i[a]=b,g()&&j.forEach(function(a){a()})},i[a]=!1,b.src=a}function f(a){return i[a]}function g(){var a=!0;for(var b in i)i.hasOwnProperty(b)&&!i[b]&&(a=!1);return a}function h(a){j.push(a)}var i={},j=[];b.exports={load:d,get:f,onReady:h,isReady:g}},{}]},{},[2]);
//# sourceMappingURL=../_dev/_map/sourcemap.map